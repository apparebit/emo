%%
%% This is file `emo.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% emo.dtx  (with options: `package')
%% 
%% emo•ji for all (LaTeX engines)
%% (C) Copyright 2023 by Robert Grimm
%% Released under LPPL v1.3c or later
%% <https://github.com/apparebit/emo>
%% 
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{emo}
    [2023/05/01 v0.5 emo•ji for all (LaTeX engines)]
\newif\ifemo@extra\emo@extrafalse
\newif\ifemo@indexing\emo@indexingfalse
\newif\ifemo@debug\emo@debugfalse
\DeclareOption{extra}{\emo@extratrue}
\DeclareOption{index}{\emo@indexingtrue}
\DeclareOption{debug}{\emo@debugtrue}
\ProcessOptions\relax
\RequirePackage[utf8]{inputenc}
\newif\ifemo@use@unicode
\newif\ifemo@use@font
\newif\ifemo@use@pdf
\RequirePackage{iftex}
\ifdefined\HCode
    \emo@use@unicodetrue
\else
\ifluatex
    \emo@use@unicodetrue
    \emo@use@fonttrue
\else
    \emo@use@pdftrue
\fi
\fi
\RequirePackage{xcolor}
\ifemo@indexing
    \RequirePackage{index}
\fi
\ifemo@use@font
    \RequirePackage{fontspec}
\fi
\ifemo@use@pdf
    \RequirePackage{graphicx}
\fi
\input{emo.def}
\definecolor{emo@error@fg}{rgb}{1,1,1}
\definecolor{emo@error@bg}{rgb}{.6824,.0863,.0863}
\def\emo@error#1{%
    \colorbox{emo@error@bg}{%
        \textcolor{emo@error@fg}{%
            \textsf{Bad} \texttt{\textbackslash emo\{#1\}}%
        }%
    }%
}
\def\emo@ifdef#1#2{%
    \ifcsname emo@emoji@#1\endcsname#2\else%
        \PackageWarning{emo}{Unknown emoji name in `\string\emo{#1}'}%
        \emo@error{#1}%
    \fi%
}
\NewHook{emo/render/before}
\NewHook{emo/render/emoji}
\ifemo@extra
\NewHook{emo/render/chinese}
\NewHook{emo/render/hebrew}
\fi
\NewHook{emo/render/content}
\NewReversedHook{emo/render/after}
\def\emo@makecommand#1{%
    \noexpand\def\noexpand\emo@key{##1}%
    \noexpand\emo@ifdef{##1}{%
        \noexpand\UseHook{emo/render/before}%
        \noexpand\def\noexpand\emo@value{%
            \noexpand\begingroup%
            \noexpand#1%
            \noexpand\UseHook{emo/render/content}%
            \noexpand\endgroup%
        }%
        \noexpand\UseHook{emo/render/after}%
        \noexpand\emo@value%
    }%
}
\edef\emo#1{\emo@makecommand{\UseHook{emo/render/emoji}}}
\ifemo@extra
\edef\@lingchi#1{\emo@makecommand{\UseHook{emo/render/chinese}}}
\edef\@YHWH#1{\emo@makecommand{\UseHook{emo/render/hebrew}}}
\def\lingchi{\@lingchi{lingchi}}
\def\YHWH{\@YHWH{YHWH}}
\fi
\ifemo@indexing
\newindex{emo}{edx}{end}{Emoji Index}
\def\emo@index#1{\index[emo]{#1}}
\AddToHook{emo/render/before}{\expandafter\emo@index\expandafter{\emo@key}}
\fi
\ifemo@use@font
\newfontface\emo@font@emoji[Renderer=Harfbuzz]{NotoColorEmoji.ttf}
\AddToHook{emo/render/emoji}{\emo@font@emoji}
\ifemo@extra
\newfontface\emo@font@chinese{emo-lingchi.ttf}
\newfontface\emo@font@hebrew{LinLibertine_R.otf}
\AddToHook{emo/render/chinese}{\emo@font@chinese}
\AddToHook{emo/render/hebrew}{\emo@font@hebrew\textdir TRT}
\fi
\fi
\ifemo@use@unicode
\AddToHook{emo/render/content}{\csname emo@emoji@\emo@key\endcsname}
\fi
\ifemo@use@pdf
\AddToHook{emo/render/content}{%
    \raisebox{-0.2ex}{\includegraphics[height=1em]{emo-graphics/emo-\emo@key}}%
}
\fi
\ifemo@debug
\AddToHook{emo/render/after}{%
    \let\emo@realvalue\emo@value%
    \def\emo@value{\fbox{\emo@realvalue}}%
}
\fi
\endinput
%%
%% End of file `emo.sty'.
